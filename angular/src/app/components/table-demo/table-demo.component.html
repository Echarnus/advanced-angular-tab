<div class="min-h-screen bg-background p-6">
  <!-- Header -->
  <div class="flex items-center justify-between mb-8">
    <div class="space-y-2">
      <h1 class="text-3xl font-bold tracking-tight">Advanced Data Table</h1>
      <p class="text-muted-foreground">
        A comprehensive table component with sticky headers, sorting, pagination, expandable rows, frozen columns, and flexible width handling.
      </p>
    </div>
    <button class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 w-9">
      <!-- Theme toggle placeholder -->
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
      </svg>
    </button>
  </div>

  <app-advanced-table
    [data]="data"
    [columns]="columns"
    [loading]="loading"
    [rowKey]="'id'"
    [expandable]="{ expandedRowTemplate: expandedRowTemplate, expandRowByClick: false }"
    [pagination]="pagination"
    [sticky]="{ offsetHeader: 0 }"
    [scroll]="{ x: '100%' }"
    (pageChange)="onPageChange($event)"
    (sort)="onSort($event)"
    (expand)="onExpand($event)"
    class="bg-white rounded-lg shadow">
    
    <!-- Pass the expanded row template -->
    <ng-template #expandedRowTemplate let-record>
      <div class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="space-y-3">
            <h4 class="font-semibold">Contact Information</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between">
                <span class="text-muted-foreground">Email:</span>
                <span>{{ record.email }}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-muted-foreground">Department:</span>
                <span>{{ record.department }}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-muted-foreground">Role:</span>
                <span>{{ record.role }}</span>
              </div>
            </div>
          </div>
          <div class="space-y-3">
            <h4 class="font-semibold">Employment Details</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between">
                <span class="text-muted-foreground">Join Date:</span>
                <span>{{ record.joinDate }}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-muted-foreground">Last Login:</span>
                <span>{{ record.lastLogin }}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-muted-foreground">Salary:</span>
                <span>{{ record.salary | currency:'USD':'symbol':'1.0-0' }}</span>
              </div>
            </div>
          </div>
          <div class="md:col-span-2 space-y-3">
            <h4 class="font-semibold">Description</h4>
            <p class="text-sm text-muted-foreground">{{ record.description }}</p>
          </div>
        </div>
        <div class="flex space-x-2">
          <app-button variant="default" size="sm" (click)="editUser(record)">Edit User</app-button>
          <app-button variant="outline" size="sm" (click)="viewProfile(record)">View Profile</app-button>
          <app-button variant="destructive" size="sm" (click)="deleteUser(record)">Delete User</app-button>
        </div>
      </div>
    </ng-template>
  </app-advanced-table>

  <!-- Feature highlights -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-8">
    <div class="space-y-2">
      <h3 class="font-semibold">Features Demonstrated</h3>
      <ul class="text-sm text-muted-foreground space-y-1">
        <li>• Sticky header behavior</li>
        <li>• Frozen columns (ID & Last Login)</li>
        <li>• Sortable columns</li>
        <li>• Expandable rows</li>
      </ul>
    </div>
    <div class="space-y-2">
      <h3 class="font-semibold">Pagination</h3>
      <ul class="text-sm text-muted-foreground space-y-1">
        <li>• Configurable page sizes</li>
        <li>• Page navigation</li>
        <li>• Total count display</li>
        <li>• Persistent state</li>
      </ul>
    </div>
    <div class="space-y-2">
      <h3 class="font-semibold">Column Features</h3>
      <ul class="text-sm text-muted-foreground space-y-1">
        <li>• Fixed & flexible widths</li>
        <li>• Text ellipsis handling</li>
        <li>• Custom cell rendering</li>
        <li>• Horizontal scrolling</li>
      </ul>
    </div>
    <div class="space-y-2">
      <h3 class="font-semibold">Event Driven</h3>
      <ul class="text-sm text-muted-foreground space-y-1">
        <li>• Sort events</li>
        <li>• Pagination events</li>
        <li>• Expand events</li>
        <li>• Loading states</li>
      </ul>
    </div>
  </div>

  <!-- Additional content for scroll testing -->
  <div class="mt-16 space-y-6">
    <h2 class="text-2xl font-bold">Additional Content for Scroll Testing</h2>
    <p class="text-muted-foreground">
      Scroll down to see the sticky header behavior in action. The table header should remain visible at the top of the viewport.
    </p>
    
    <div class="space-y-6">
      <div *ngFor="let section of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]" class="p-6 bg-white rounded-lg shadow">
        <h3 class="font-semibold mb-2">Section {{ section }}</h3>
        <p class="text-muted-foreground mb-4">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor 
          incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud 
          exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        </p>
        <p class="text-muted-foreground">
          Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu 
          fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in 
          culpa qui officia deserunt mollit anim id est laborum.
        </p>
      </div>
    </div>
  </div>
</div>

<!-- Cell Templates -->
<ng-template #nameTemplate let-value let-record="record">
  <div class="font-medium text-foreground">{{ value }}</div>
</ng-template>

<ng-template #roleTemplate let-value>
  <app-badge [variant]="getRoleVariant(value)">{{ value }}</app-badge>
</ng-template>

<ng-template #statusTemplate let-value>
  <app-badge [variant]="getStatusVariant(value)">{{ value }}</app-badge>
</ng-template>

<ng-template #salaryTemplate let-value>
  {{ value | currency:'USD':'symbol':'1.0-0' }}
</ng-template>


