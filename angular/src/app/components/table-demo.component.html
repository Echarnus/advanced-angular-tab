<div class="min-h-screen bg-background p-6">
  <!-- Header -->
  <div class="flex items-start justify-between mb-6">
    <div>
      <h1 class="text-4xl font-bold tracking-tight mb-2">Advanced Data Table</h1>
      <p class="text-muted-foreground max-w-3xl">
        A comprehensive table component with sticky headers, sorting, pagination, expandable rows, frozen columns, and flexible width handling with min/max constraints.
      </p>
    </div>
    <div class="flex items-center gap-2">
      <app-button
        variant="outline"
        size="sm"
        (click)="showConfig = !showConfig">
        <svg width="16" height="16" viewBox="0 0 256 256">
          <path fill="currentColor" d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3.12-3.12L186-218.16a8,8,0,0,0-3.93-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.21,107.21,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.48-3.12,3.12L40.68,70.02a8,8,0,0,0-6,3.93,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.48,1.56,3.12,3.12L70,215.32a8,8,0,0,0,3.93,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3.12-3.12L215.32,186a8,8,0,0,0,6-3.93,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06ZM128,184A56,56,0,1,1,184,128,56.06,56.06,0,0,1,128,184Z"/>
        </svg>
        {{ showConfig ? 'Hide Config' : 'Show Config' }}
      </app-button>
      <app-theme-switcher></app-theme-switcher>
    </div>
  </div>

  <!-- Configuration Panel -->
  @if (showConfig) {
    <app-card className="p-6 mb-6">
      <div class="space-y-4">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-lg font-semibold">Column Configuration</h3>
            <p class="text-sm text-muted-foreground">
              Edit the JSON configuration to test different column scenarios. Render functions will be automatically applied.
            </p>
          </div>
          <div class="flex gap-2">
            <app-button size="sm" variant="outline" (click)="resetConfig()">
              <svg width="16" height="16" viewBox="0 0 256 256">
                <path fill="currentColor" d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"/>
              </svg>
              Reset
            </app-button>
            <app-button size="sm" (click)="applyConfig()">
              Apply Changes
            </app-button>
          </div>
        </div>
        <textarea
          [(ngModel)]="configText"
          class="w-full h-64 p-3 border rounded-md bg-background text-sm font-mono"
          placeholder="Column configuration JSON..."></textarea>
        
        <div class="bg-muted p-4 rounded-md">
          <h4 class="font-semibold mb-2">Configuration Options:</h4>
          <ul class="text-sm space-y-1 text-muted-foreground">
            <li><code>width</code>: Fixed width (e.g., 120)</li>
            <li><code>minWidth</code>: Minimum width constraint</li>
            <li><code>maxWidth</code>: Maximum width constraint</li>
            <li><code>frozen</code>: Make column sticky on horizontal scroll</li>
            <li><code>sortable</code>: Enable sorting for this column</li>
            <li><code>ellipsis</code>: Truncate text with ellipsis when it overflows</li>
          </ul>
        </div>

        <div class="space-y-3">
          <h4 class="font-semibold">Quick Test Scenarios:</h4>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2">
            <app-button
              size="sm"
              variant="outline"
              (click)="applyPreset('multiFrozen')">
              Multi-Frozen Columns
            </app-button>
            
            <app-button
              size="sm"
              variant="outline"
              (click)="applyPreset('fixedPlusOne')">
              Fixed + One Flexible
            </app-button>
            
            <app-button
              size="sm"
              variant="outline"
              (click)="applyPreset('allMinMax')">
              All Min/Max + Ellipsis
            </app-button>
            
            <app-button
              size="sm"
              variant="outline"
              (click)="applyPreset('noConstraints')">
              No Width Constraints
            </app-button>
            
            <app-button
              size="sm"
              variant="outline"
              (click)="applyPreset('tripleFrozen')">
              Triple Frozen
            </app-button>
            
            <app-button
              size="sm"
              variant="outline"
              (click)="applyPreset('wideDescription')">
              Wide Description
            </app-button>
          </div>
        </div>
      </div>
    </app-card>
  }

  <!-- Table -->
  <div class="space-y-6">
    <app-advanced-table
      [data]="displayData"
      [columns]="columns"
      [loading]="loading"
      [expandable]="{
        expandedRowRender: getExpandedRowRender.bind(this),
        expandRowByClick: false
      }"
      [pagination]="{
        current: 1,
        pageSize: 10,
        total: allData.length,
        showSizeChanger: true,
        pageSizeOptions: [10, 20, 50],
        showPagination: true
      }"
      [sticky]="{ offsetHeader: 0 }"
      [scroll]="{ x: '100%' }"
      (pageChange)="onPageChange($event)"
      (sort)="onSort($event)"
      (expand)="onExpand($event)"
      className="shadow-sm">
    </app-advanced-table>
  </div>

  <!-- Feature Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-8">
    <app-card className="p-4">
      <h3 class="font-semibold mb-2">Features Demonstrated</h3>
      <ul class="text-sm space-y-1 text-muted-foreground">
        <li>• Sticky header behavior</li>
        <li>• Frozen columns (ID & Name)</li>
        <li>• Sortable columns</li>
        <li>• Expandable rows</li>
      </ul>
    </app-card>
    
    <app-card className="p-4">
      <h3 class="font-semibold mb-2">Pagination</h3>
      <ul class="text-sm space-y-1 text-muted-foreground">
        <li>• Configurable page sizes</li>
        <li>• Page navigation</li>
        <li>• Total count display</li>
        <li>• Persistent state</li>
      </ul>
    </app-card>
    
    <app-card className="p-4">
      <h3 class="font-semibold mb-2">Column Features</h3>
      <ul class="text-sm space-y-1 text-muted-foreground">
        <li>• Fixed, min/max & flexible widths</li>
        <li>• Text ellipsis handling</li>
        <li>• Custom cell rendering</li>
        <li>• Horizontal scrolling</li>
      </ul>
    </app-card>
    
    <app-card className="p-4">
      <h3 class="font-semibold mb-2">Event Driven</h3>
      <ul class="text-sm space-y-1 text-muted-foreground">
        <li>• Sort events</li>
        <li>• Pagination events</li>
        <li>• Expand events</li>
        <li>• Loading states</li>
      </ul>
    </app-card>
  </div>

  <!-- Additional Content for Scroll Testing -->
  <div class="space-y-8 mt-16">
    <h2 class="text-xl font-semibold">Additional Content for Scroll Testing</h2>
    <p class="text-muted-foreground">
      Scroll down to see the sticky header behavior in action. The table header should remain visible at the top of the viewport.
    </p>
    
    @for (section of sections; track section; let i = $index) {
      <div class="space-y-4">
        <app-card className="p-6">
          <h3 class="font-semibold mb-2">Section {{ i + 1 }}</h3>
          <p class="text-muted-foreground mb-4">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor 
            incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud 
            exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
          </p>
          <p class="text-muted-foreground">
            Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu 
            fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in 
            culpa qui officia deserunt mollit anim id est laborum.
          </p>
        </app-card>
      </div>
    }
  </div>
</div>